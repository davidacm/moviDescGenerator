(function(e){function a(a){for(var i,r,n=a[0],c=a[1],l=a[2],d=0,p=[];d<n.length;d++)r=n[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(a);while(p.length)p.shift()();return s.push.apply(s,l||[]),t()}function t(){for(var e,a=0;a<s.length;a++){for(var t=s[a],i=!0,n=1;n<t.length;n++){var c=t[n];0!==o[c]&&(i=!1)}i&&(s.splice(a--,1),e=r(r.s=t[0]))}return e}var i={},o={app:0},s=[];function r(a){if(i[a])return i[a].exports;var t=i[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=e,r.c=i,r.d=function(e,a,t){r.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,a){if(1&a&&(e=r(e)),8&a)return e;if(4&a&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var i in e)r.d(t,i,function(a){return e[a]}.bind(null,i));return t},r.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(a,"a",a),a},r.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},r.p="/moviDescGenerator/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=a,n=n.slice();for(var l=0;l<n.length;l++)a(n[l]);var u=c;s.push([0,"chunk-vendors"]),t()})({0:function(e,a,t){e.exports=t("56d7")},"034f":function(e,a,t){"use strict";t("85ec")},"3eea":function(e,a,t){"use strict";t("a27f")},"56d7":function(e,a,i){"use strict";i.r(a);i("e260"),i("e6cf"),i("cca6"),i("a79d");var o=i("2b0e"),s=i("666c"),r=(i("373e"),function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"app"}},[t("b-tabs",{attrs:{justified:""},model:{value:e.tabIndex,callback:function(a){e.tabIndex=a},expression:"tabIndex"}},[t("b-tab",{attrs:{title:"Work tab",active:""}},[t("work-view")],1),t("b-tab",{attrs:{title:"Configuración"}},[t("Settings")],1),t("b-tab",{attrs:{title:"Instrucciones"}},[t("Help")],1)],1)],1)}),n=[],c=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{on:{keydown:e.onKey}},[t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",[t("b-dropdown",{attrs:{text:"Opciones"}},[t("b-dropdown-item",{attrs:{href:"https://davidacm.github.io/donations/"}},[e._v(" donar al proyecto. ")]),t("b-dropdown-item-button",{on:{click:function(){return e.$refs.openMedia.click()}}},[e._v("Abrir archivo multimedia ")]),t("input",{ref:"openMedia",attrs:{type:"file",hidden:""},on:{change:e.onMediaLoad}}),t("b-dropdown-item-button",{on:{click:function(){return e.$refs.openDesc.click()}}},[e._v("Abrir archivo de descripciones ")]),t("input",{ref:"openDesc",attrs:{type:"file",hidden:""},on:{change:e.onDescLoad}}),t("b-dropdown-item-button",{on:{click:e.downloadDescriptions}},[e._v("Descargar descripciones actuales ")]),t("b-dropdown-item-button",{on:{click:e.saveInLocal}},[e._v("Guardar todo en localStorage ")]),t("b-dropdown-item-button",{on:{click:e.clearAll}},[e._v("Borrar todo ")]),t("b-dropdown-form",[t("label",{attrs:{for:"offsetId"}},[e._v("offset")]),t("input",{directives:[{name:"model",rawName:"v-model.lazy.number",value:e.offset,expression:"offset",modifiers:{lazy:!0,number:!0}}],attrs:{id:"offsetId",type:"text"},domProps:{value:e.offset},on:{change:function(a){e.offset=e._n(a.target.value)},blur:function(a){return e.$forceUpdate()}}})])],1)],1)],1),t("b-row",{directives:[{name:"show",rawName:"v-show",value:e.localURL,expression:"localURL"}]},[t("b-col",[t("b-row",[t("b-col",[t("h1",[e._v("video player")]),e.useAriaLive&&!e.descPlayer.paused?t("p",{attrs:{"aria-live":"assertive"}},[e._v(" "+e._s(e.textDesc)+" ")]):e._e(),t("vue-plyr",[t("video",{ref:"videocontrol",attrs:{controls:"",crossorigin:"",playsinline:"",src:e.localURL},on:{pause:e.onPause}})])],1)],1),t("b-row",[t("b-col",[t("b-row",[t("b-col",[t("h1",[e._v("transcriptions")])])],1),t("b-row",[t("b-col",[t("label",{attrs:{for:"cueList"}},[e._v("Cues")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.curPos,expression:"curPos"}],attrs:{id:"cueList"},on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.curPos=a.target.multiple?t:t[0]}}},e._l(e.cues,(function(a,i){return t("option",{key:i,domProps:{value:i}},[e._v(" "+e._s(a.pos+": "+a.text)+" ")])})),0)])],1),e.curCue?[t("b-row",[t("b-col",[t("label",{attrs:{for:"description"}},[e._v("Descripción")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.curText,expression:"curText"}],ref:"description",attrs:{type:"text",id:"description"},domProps:{value:e.curText},on:{input:function(a){a.target.composing||(e.curText=a.target.value)}}})])],1),t("b-row",[t("b-col",[t("label",{attrs:{for:"curDescription"}},[e._v("timestamp")]),t("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:e.curTimestamp,expression:"curTimestamp",modifiers:{number:!0,lazy:!0}}],attrs:{type:"text",id:"curDescription"},domProps:{value:e.curTimestamp},on:{change:function(a){e.curTimestamp=e._n(a.target.value)},blur:function(a){return e.$forceUpdate()}}})])],1),t("b-row",[t("b-col",[t("b-button",{on:{click:e.playPrevCue}},[e._v(" reproducir marca anterior ")])],1),t("b-col",[t("b-button",{on:{click:e.playCurrentCue}},[e._v(" reproducir marca actual ")])],1),t("b-col",[t("b-button",{on:{click:e.playNextCue}},[e._v(" reproducir marca siguiente ")])],1),t("b-col",[t("b-button",{on:{click:e.deleteCurCue}},[e._v(" borrar marca actual ")])],1)],1),t("b-row",[t("b-col",[t("b-button",{on:{click:function(a){return e.moveCurCuePosition(-.5)}}},[e._v(" -0.5 segs ")])],1),t("b-col",[t("b-button",{on:{click:function(a){return e.moveCurCuePosition(-1)}}},[e._v(" -1 segs ")])],1),t("b-col",[t("b-button",{on:{click:function(a){return e.moveCurCuePosition(1)}}},[e._v(" +1 segs ")])],1),t("b-col",[t("b-button",{on:{click:function(a){return e.moveCurCuePosition(.5)}}},[e._v(" +0.5 segs ")])],1)],1)]:e._e(),t("b-row",[t("b-col",[t("b-button",{on:{click:e.newCue}},[e._v("Añadir nueva marca")])],1),t("b-col",[t("b-button",{on:{click:e.togglePlayWithDesc}},[e.descPlayer.paused?t("span",[e._v("reproducir")]):t("span",[e._v("pausar")]),e._v(" con descripciones. ")])],1),t("b-col",[t("b-button",{on:{click:e.undoDelete}},[e._v("Deshacer última marca borrada")])],1)],1)],2)],1)],1)],1)],1)],1)},l=[],u=i("5530"),d=i("b85c"),p=(i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("b0c0"),i("b680"),i("a4d3"),i("e01a"),i("a434"),i("2f62")),m=i("d4ec"),v=i("bee2"),h=(i("498a"),i("ac1f"),i("1276"),i("466d"),i("5319"),i("99af"),i("e9c4"),i("b64b"),window.speechSynthesis),f=!!h,b={default:void 0,voices:{}};function g(e){if(h){var a=function(){var a,t=h.getVoices(),i={},o=Object(d["a"])(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;void 0==i[s.lang]&&(i[s.lang]={}),i[s.lang][s.name]=s,s.default&&(b.default=s)}}catch(r){o.e(r)}finally{o.f()}b.voices=i,e&&Object.keys(i).length>0&&(e(b),e=void 0)};a(),void 0!==speechSynthesis.onvoiceschanged&&(speechSynthesis.onvoiceschanged=a)}}function y(e,a,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(f&&(h.cancel(),""!==e)){var s=new SpeechSynthesisUtterance(e);s.onerror=function(){console.error("SpeechSynthesisUtterance.onerror")},a&&(s.lang=a),a&&t&&(s.voice=b.voices[a][t]),s.pitch=o,s.rate=i,h.speak(s)}}function _(){f&&h.cancel()}g();var C={install:function(e){e.prototype.speak=function(e){var a=U.state;y(e,a.vLang,a.vVoice,a.rate,a.pitch)},e.prototype.cancelSpeak=function(){_()}}},x=/\[*(\d+:)+\d+([.,]+\d+){0,1}/;function k(e){if(e=e.trim(),!e)return null;e=e.split("\n");var a,t={text:""},i=Object(d["a"])(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(t.timestamp)t.text+=" "+o;else{if(o=o.trim(),o=o.match(x),!o)continue;o=o[0].replace("[",""),t.timestamp=j(o)}}}catch(s){i.e(s)}finally{i.f()}return t.timestamp?(t.text=t.text.substring(1),t):null}function w(e,a,t){e.timestamp>a&&(a=e.timestamp+1);var i=D(e.timestamp),o=D(a),s="";return t&&(s="".concat(t,"\n")),s+="".concat(i," --\x3e ").concat(o,"\n").concat(e.text,"\n\n"),s}function P(e){e=e.replace(/\r/g,""),e=e.split("\n\n");var a,t=[],i=Object(d["a"])(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;console.log("procesando cue",o),o=k(o),o&&t.push(o)}}catch(s){i.e(s)}finally{i.f()}return console.log(t),t}function T(e){var a="WEBVTT\n\n",t=e.length-1;if(e.length<0)return"";if(0==e.length)return a+w(e[0],e[0].timestamp+1);for(var i=0;i<t;++i)a+=w(e[i],e[i+1].timestamp-1);return a+=w(e[t],e[t].timestamp+1),a}function S(e,a){for(var t=arguments.length,i=new Array(t>2?t-2:0),o=2;o<t;o++)i[o-2]=arguments[o];e.splice.apply(e,[a,0].concat(i))}function z(e,a,t){return e.timestamp>=a.timestamp&&e.timestamp<t.timestamp}function j(e){e=e.trim().replace(",",".").split(":").reverse();for(var a=0,t=0;t<e.length;++t)switch(t){case 0:a=parseFloat(e[t]);break;case 1:a+=60*parseFloat(e[t]);break;case 2:a+=60*parseFloat(e[t])*60;break}return a}function D(e){var a=new Date(1e3*e);return a.toISOString().substr(11,12)}function L(e,a,t){if("function"!=typeof t&&(t=function(e){return e.timestamp}),null==a||void 0==a)return null;var i=e.length;if(0==i)return null;if(1==i||a<=t(e[0]))return e[0];if(--i,a>=t(e[i]))return e[i];a={timestamp:a};for(var o=0,s={},r={},n=0;n<=e.length;++n){var c=Math.round((o+i)/2);if(0==c&&++c,s.timestamp=t(e[c-1]),r.timestamp=t(e[c]),z(a,s,r))return e[--c];a.timestamp<s.timestamp?i=c:o=c}return null}function q(e,a){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8, "+encodeURIComponent(a)),t.setAttribute("download",e),t.click(),document.body.removeChild(t)}var E=new Proxy({},{get:function(e,a){if("setItem"==a)return function(e,a){return localStorage.setItem(e,JSON.stringify(a))};var t=function(e){var a=localStorage.getItem(e);return null!==a?JSON.parse(a):a};return"getItem"==a?t:t(a)},set:function(e,a,t){return localStorage.setItem(a,JSON.stringify(t)),!0}});function O(e,a){var t=E[e];return null!==t?t:a}function A(e,a){var t=e.paused;t?e.play():e.pause(),a&&(t?a.play():a.pause())}function M(e){e.playbackRate<=.25||(e.playbackRate-=.25)}function I(e){e.playbackRate>=4||(e.playbackRate+=.25)}function $(e){e.playbackRate=1}var N=function(){function e(a,t,i){Object(m["a"])(this,e),this.cues=a,this.funcSpeak=t,this.funcCancelSpeak=i,this.onPlay=null,this.onPause=null,this.onCue=null,this.offset=0,this.curTime=0,this.realCurTime=null,this.paused=!0,this.nextCue=null,this.nextCueId=null,this._callExternal=this._callExternal.bind(this),this.playNextCue=this.playNextCue.bind(this),this.run=this.run.bind(this),this.getTimestamp=this.getTimestamp.bind(this),this.play=this.play.bind(this),this.pause=this.pause.bind(this)}return Object(v["a"])(e,[{key:"currentTime",get:function(){return this.paused?this.curTime:((new Date).getTime()-this.realCurTime)/1e3+this.curTime},set:function(e){var a=this.paused;this.pause(),this.curTime=e,a||this.play()}},{key:"_callExternal",value:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),i=1;i<a;i++)t[i-1]=arguments[i];"function"==typeof e&&e.apply(void 0,t)}},{key:"playNextCue",value:function(){this.curTime=this.getTimestamp(this.nextCue);var e=this.nextCue;e.pos<this.cues.length-1?(this.nextCue=this.cues[e.pos+1],this.run()):(this.nextCue=null,clearTimeout(this.nextCueId),this.nextCueId=null,this.paused=!0,this._callExternal(this.onPause)),this._callExternal(this.funcCancelSpeak),this._callExternal(this.funcSpeak,e.text),this._callExternal(this.onCue,e)}},{key:"run",value:function(){this.realCurTime=(new Date).getTime(),this.nextCueId=setTimeout(this.playNextCue,1e3*(this.nextCue.timestamp-this.curTime+this.offset))}},{key:"getTimestamp",value:function(e){return e.timestamp+this.offset}},{key:"play",value:function(){if(!this.pause)return!1;if(null==this.cues||0==this.cues.length)return!1;if(this.curTime<0)return!1;var e=L(this.cues,this.curTime,this.getTimestamp);if(this.getTimestamp(e)<this.curTime){if(e.pos==this.cues.length-1)return!1;e=this.cues[e.pos+1]}return this.getTimestamp(e)>=this.curTime&&(this.nextCue=e,this.paused=!1,this.run(),!0)}},{key:"pause",value:function(){this.curTime=this.currentTime,this.nextCueId&&clearTimeout(this.nextCueId),this.nextCueId=null,this.paused=!0,this.funcCancelSpeak()}}]),e}();o["a"].use(p["a"]);var V=function(e){return function(a){return e[a]}},K=new p["a"].Store({state:{useAriaLive:O("useAriaLive",!1),useTts:O("useTts",!1),vLang:O("vLang",null),vVoice:O("vVoice",null),rate:O("rate",1),pitch:O("pitch",1)},getters:{realtimePersistentFields:V,commonFields:V},mutations:{realtimePersistentFields:function(e,a){var t=a.field,i=a.value;e[t]=i,E[t]=i},commonFields:function(e,a){var t=a.field,i=a.value;e[t]=i}}}),U=K,F=function(e,a){var t,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o={},s=Object(d["a"])(e);try{var r=function(){var e=t.value;o[e]={},o[e].get=function(){return K.getters[a](e)},i&&(o[e].set=function(t){K.commit(a,{field:e,value:t})})};for(s.s();!(t=s.n()).done;)r()}catch(n){s.e(n)}finally{s.f()}return o},R={name:"WorkView",data:function(){return{selectedMedia:null,selectedDesc:null,localURL:null,cues:[],curPos:null,curCue:null,stackDeleted:[],descPlayer:null,textDesc:""}},created:function(){this.descPlayer=new N(this.cues,this.speak,this.cancelSpeak)},methods:{onPause:function(){this.descPlayer.pause()},onMediaLoad:function(e){var a=e.target.files[0];this.selectedMedia=a,this.localURL=URL.createObjectURL(a);var t=E[a.name];t&&(this.cues=t.cues,this.curPos=t.curPos)},onDescLoad:function(e){var a=this,i=e.target.files[0];if(this.selectedDesc=i,i){var o=new FileReader;o.readAsText(i,"UTF-8"),o.onload=function(e){var i,o=Object(d["a"])(P(t));try{for(o.s();!(i=o.n()).done;){var s=i.value;a.insertCue(s)}}catch(r){o.e(r)}finally{o.f()}},o.onerror=function(e){console.error(e)}}},saveInLocal:function(){var e={cues:this.cues,curPos:this.curPos};this.selectedMedia&&(E[this.selectedMedia.name]=e)},clearAll:function(){this.curPos=null,this.cues=[],this.curCue=null,this.selectedMedia&&E[this.selectedMedia.name]&&(E[this.selectedMedia.name]=null)},downloadDescriptions:function(){var e="noNameDesc.vtt";this.selectedDesc?e=this.selectedDesc.name:this.selectedMedia&&(e=this.selectedMedia.name+".vtt"),q(e,T(this.cues))},deleteCurCue:function(){null!=this.curCue&&(this.stackDeleted.push(this.curCue),this.deleteCue(this.curCue),0==this.cues.length?this.curPos=null:this.curPos>=this.cues.length?this.curPos=this.cues.length-1:this.curCue=this.cues[this.curPos])},undoDelete:function(){if(0!=this.stackDeleted.length){var e=this.stackDeleted.pop();this.insertCue(e),this.curCue=e,this.curPos=e.pos}},updatePoss:function(){for(var e=0;e<this.cues.length;++e)this.cues[e].pos=e},getCurrentTime:function(){return parseFloat(this.$refs.videocontrol.currentTime.toFixed(3))},setMediaTime:function(e){this.$refs.videocontrol.currentTime=e,this.descPlayer.currentTime=e},moveSecs:function(e){this.setMediaTime(this.getCurrentTime()+e)},newCue:function(){var e=this,a={text:"",timestamp:this.getCurrentTime(),pos:null};this.insertCue(a),null!==a.pos&&(this.curPos=a.pos,this.curCue=a,this.$nextTick((function(){return e.$refs.description.focus()})))},insertCue:function(e){if(0==this.cues.length||e.timestamp>this.cues[this.cues.length-1].timestamp)this.cues.push(e);else if(e.timestamp<this.cues[0].timestamp)this.cues.unshift(e);else{var a=L(this.cues,e.timestamp);e.timestamp==a.timestamp&&(console.log("ya existe una marca en el tiempo indicado, se sumara 0.1 segs a la nueva"),e.timestamp+=.1),S(this.cues,a.pos+1,e)}this.updatePoss()},deleteCue:function(e){this.cues.splice(e.pos,1),this.updatePoss()},updateCueTimestamp:function(e,a){if(!(a<0||a==e.timestamp))if(1==this.cues.length||0==e.pos&&a<e.timestamp||e.pos==this.cues.length-1&&a>e.timestamp)e.timestamp=a;else{var t=e,i=e;if(a<e.timestamp?t=this.cues[e.pos-1]:i=this.cues[e.pos+1],z({timestamp:a},t,i))return e.pos!=t.pos&&a==t.timestamp&&(a+=.1),void(e.timestamp=a);this.deleteCue(e),e.timestamp=a,this.insertCue(e),this.curPos=e.pos}},moveCurCuePosition:function(e){if(this.curCue){var a=this.curCue.timestamp+e;a<0&&(a=0),this.curCue.timestamp=a,this.playCurrentCue()}},setCurCueByCurTime:function(){var e=L(this.cues,this.getCurrentTime());e&&(this.curPos=e.pos),this.curCue=e},playNextCue:function(){this.curPos>=this.cues.length-1||(++this.curPos,this.playCurrentCue())},playPrevCue:function(){null!=this.curPos&&0!=this.curPos&&(--this.curPos,this.playCurrentCue())},playCurrentCue:function(){var e=this;this.curCue&&this.$nextTick((function(){e.setMediaTime(e.curCue.timestamp),e.$refs.videocontrol.play(),e.cancelSpeak(),e.speak(e.curCue.text)}))},togglePlayWithDesc:function(){this.descPlayer.currentTime=this.getCurrentTime(),A(this.$refs.videocontrol,this.descPlayer)},onKey:function(e){var a=this.$refs.videocontrol;if(e.shiftKey&&e.altKey){switch(e.code){case"KeyE":this.downloadDescriptions();break;case"KeyS":this.saveInLocal();break;case"KeyJ":this.moveSecs(-5);break;case"KeyK":A(a);break;case"KeyL":this.moveSecs(5);break;case"KeyG":this.deleteCurCue();break;case"KeyH":this.undoDelete();break;case"KeyY":this.setCurCueByCurTime();break;case"KeyU":this.playPrevCue();break;case"KeyI":this.playCurrentCue();break;case"KeyO":this.playNextCue();break;case"Comma":M(a);break;case"Period":I(a);break;case"Slash":$(a);break;case"KeyN":this.newCue();break;case"KeyD":this.moveCurCuePosition(-1);break;case"KeyF":this.moveCurCuePosition(1);break;case"KeyC":this.moveCurCuePosition(-.5),this.playCurrentCue();break;case"KeyV":this.moveCurCuePosition(.5);break}e.preventDefault()}}},watch:{cues:function(e){var a=this;this.descPlayer.cues=e,e=this.useTts,this.descPlayer.funcSpeak=e?this.speak:null,e=this.useAriaLive,this.descPlayer.onCue=e?function(e){return a.textDesc=e.text}:null},curPos:function(e){this.curCue=this.cues[e]},useTts:function(e){this.descPlayer.funcSpeak=e?this.speak:null},useAriaLive:function(e){var a=this;this.descPlayer.onCue=e?function(e){return a.textDesc=e.text}:null}},computed:Object(u["a"])(Object(u["a"])({offset:{get:function(){return this.descPlayer?this.descPlayer.offset:null},set:function(e){this.descPlayer&&(this.descPlayer.offset=e)}}},F(["useAriaLive","useTts"],"realtimePersistentFields")),{},{curTimestamp:{get:function(){return null==this.curCue?null:this.curCue.timestamp},set:function(e){null!=this.curCue&&this.updateCueTimestamp(this.curCue,e)}},curText:{get:function(){return null==this.curCue?null:this.curCue.text},set:function(e){null!=this.curCue&&e!=this.curCue.text&&(this.curCue.text=e)}}})},G=R,W=(i("3eea"),i("2877")),B=Object(W["a"])(G,c,l,!1,null,null,null),J=B.exports,H=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"Settings"}},[t("b-container",{attrs:{fluid:""}},[t("p",{attrs:{"aria-live":"assertive"}},[e._v("Seleccione las opciones de configuración")]),t("b-row",{staticClass:"row-spacing"},[t("b-col",[t("b-form-checkbox",{model:{value:e.useAriaLive,callback:function(a){e.useAriaLive=a},expression:"useAriaLive"}},[e._v(" Leer descripciones con lector de pantallas. ")])],1)],1),t("b-row",{staticClass:"row-spacing"},[t("b-col",[t("b-form-checkbox",{attrs:{disabled:!e.isSynthAvailable,switch:""},model:{value:e.useTts,callback:function(a){e.useTts=a},expression:"useTts"}},[e._v(" Usar síntesis de voz del sistema. ")])],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isSynthAvailable&&e.useTts,expression:"isSynthAvailable && useTts"}]},[t("h1",[e._v("Configuraciones de voz")]),t("b-row",{staticClass:"row-spacing"},[t("b-col",[t("label",{attrs:{for:"langs"}},[e._v("Seleccione el idioma de la voz")])]),t("b-col",[t("b-form-select",{attrs:{id:"langs"},model:{value:e.vLang,callback:function(a){e.vLang=a},expression:"vLang"}},e._l(e.langs,(function(a){return t("b-form-select-option",{key:a,attrs:{value:a}},[e._v(e._s(a))])})),1)],1)],1),t("b-row",{staticClass:"row-spacing"},[t("b-col",[t("label",{attrs:{for:"voices"}},[e._v("Seleccione la voz para leer descripciones")])]),t("b-col",[t("b-form-select",{attrs:{id:"voices"},model:{value:e.vVoice,callback:function(a){e.vVoice=a},expression:"vVoice"}},e._l(e.voiceNames,(function(a){return t("b-form-select-option",{key:a,attrs:{value:a}},[e._v(e._s(a))])})),1)],1)],1),t("b-row",{staticClass:"row-spacing"},[t("b-col",[t("label",{attrs:{for:"rateField"}},[e._v("Velocidad")]),t("b-form-input",{attrs:{id:"rateField",type:"range",min:"0",max:"10",step:"0.5"},model:{value:e.rate,callback:function(a){e.rate=a},expression:"rate"}})],1)],1),t("b-row",{staticClass:"row-spacing"},[t("b-col",[t("label",{attrs:{for:"pitchField"}},[e._v("tono")]),t("b-form-input",{attrs:{id:"pitchField",type:"range",min:"0",max:"2",step:"0.5"},model:{value:e.pitch,callback:function(a){e.pitch=a},expression:"pitch"}})],1)],1),t("b-row",{staticClass:"row-spacing"},[t("b-col",[t("label",{attrs:{for:"demo"}},[e._v("Mensaje de prueba")]),t("b-form-input",{attrs:{type:"text",id:"demo"},model:{value:e.textDemo,callback:function(a){e.textDemo=a},expression:"textDemo"}})],1)],1),t("b-row",{staticClass:"row-spacing"},[t("b-col",[t("b-button",{on:{click:e.testVoice}},[e._v(" probar voz. ")])],1)],1),t("b-row",{staticClass:"row-spacing"},[t("b-col",[t("b-button",{on:{click:e.saveVoiceSettings}},[e._v(" Guardar configuraciones de voz ")])],1)],1)],1)],1)],1)},Y=[],Q=(i("4e82"),{name:"Settings",data:function(){return{voices:null,isSynthAvailable:f,textDemo:"hola,esto es una prueba."}},methods:{saveVoiceSettings:function(){E.vLang=this.vLang,E.vVoice=this.vVoice,E.rate=this.rate,E.pitch=this.pitch},testVoice:function(){this.speak(this.textDemo)}},mounted:function(){var e=this;g((function(a){e.voices=a.voices,e.vLang||(e.vLang=a.default.lang,e.vVoice=a.default.name)}))},computed:Object(u["a"])(Object(u["a"])({langs:function(){return this.voices&&this.useTts?Object.keys(this.voices).sort():[]},voiceNames:function(){return this.voices&&this.useTts&&this.vLang?Object.keys(this.voices[this.vLang]).sort():[]}},F(["useTts","useAriaLive"],"realtimePersistentFields")),F(["vLang","vVoice","rate","pitch"],"commonFields"))}),X=Q,Z=(i("e98a"),Object(W["a"])(X,H,Y,!1,null,"02e6edaa",null)),ee=Z.exports,ae=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("h1",{ref:"sFocus",attrs:{"aria-live":"assertive",tabindex:"-1"}},[e._v(" Instrucciones de uso. ")]),t("p",[e._v(' Esta aplicación permite cargar un audio o vídeo y agregar marcas de tiempo, a las cuales podremos adjuntar un texto. La idea inicial es que ese texto será utilizado para describir las escenas de un vídeo, para ser escuchado por personas ciegas después. Pero si encuentras otros usos o sugerencias, házmelas saber. Podría ser usada también, para subtitular o realizar transcripciones, pero no es su objetivo primario. Una marca de tiempo o "cue" es un elemento que se compone de: ')]),e._m(0),t("p",[e._v(" Aunque es una aplicación web, todo el funcionamiento es realizado en su equipo. No hay ninguna conexión con ningún servidor. ")]),t("p",[e._v(" La aplicación permite cargar cualquier archivo de audio o vídeo, siempre que el navegador tenga la capacidad para reproducir el formato del archivo. Todos los navegadores suelen comportarse distinto, pero los archivos mp4 y mp3 suelen funcionar sin problemas. Aunque si su vídeo se encuentra en otro formato, intenta cargarlo antes de hacer una conversión hacia otro formato. De no funcionar, entonces deberás realizar la conversión hacia un formato compatible. Por ejemplo mp4 en el caso de un archivo de vídeo, mp3 en el caso de un archivo de audio. ")]),t("p",[e._v(" También se pueden importar archivos con marcas de tiempo, por si queremos actualizar o continuar un trabajo previamente realizado. En este aspecto soporta los formatos SRT, WebVtt, y el generado por la aplicación pinpoint. Si considera que otro formato debería estar en la lista, házmelo saber y consideraré su viabilidad. ")]),t("h2",[e._v("Descripción y uso de interfaz.")]),t("p",[e._v(" La aplicación cuenta con dos pestañas. Una de trabajo, y la otra de configuración. ")]),t("h3",[e._v("Pestaña de trabajo.")]),t("p",[e._v(" En la pestaña de trabajo tenemos varios controles autoexplicativos. Pero antes de comenzar a trabajar, debemos cargar un archivo de vídeo o de audio. Puede ser en formato mp3 o mp4. Si el archivo no es reproducido, puede que su navegador web no tenga soporte para ese formato de archivo y deba ser convertido a otro formato. En edge y chrome, mp3 y mp4 han funcionado sin problemas. ")]),t("p",[e._v(" En primera instancia se encuentra un menú desplegable de opciones, que podemos abrir pulsando click, espacio o enter. Para cerrarlo, basta con pulsar escape. En este menú podremos hacer lo siguiente: ")]),e._m(1),t("p",[e._v(" Una vez que hayamos cargado un archivo de vídeo o audio, se mostrarán los controles típicos de un reproductor. Si al cargar el archivo la aplicación encuentra que existen datos asociados al nombre del archivo en el local storage, cargará las descripciones previamente guardadas en el local storage. Nota: si tenemos descripciones precargadas y volvemos a abrir un archivo de descripciones, el sistema lo aceptará. En este caso, podríamos quedar con descripciones duplicadas. ")]),t("p",[e._v(" Cuando se muestra la interfaz de descripciones, tenemos dos encabezados: uno para el control del reproductor, y otro para la gestión de descripciones. ")]),t("h4",[e._v("sección de gestión de descripciones.")]),t("p",[e._v("En esta sección tenemos lo siguiente:")]),e._m(2),t("p",[e._v(" Nota: los controles del 2 al 11 se muestran únicamente cuando hay una marca seleccionada, puedes seleccionar las marcas en la lista de cues. ")]),t("h3",[e._v("Comandos de teclado:")]),t("p",[e._v(" Las teclas no siguen un orden inicial de la acción, si no que la mayoría están dispuestas para que sean fáciles de recordar: Todos los comandos requieren además, presionar alt + shift. ")]),e._m(3),t("h3",[e._v("Pantalla de configuración.")]),t("p",[e._v("Aquí se configuran algunos comportamientos de la aplicación.")]),e._m(4),t("h4",[e._v("Configuración de voz.")]),t("p",[e._v(' Si se activa la opción "Usar síntesis de voz del sistema", se añadirán las siguientes opciones en la pantalla de configuración: ')]),e._m(5),t("h2",[e._v("notas:")]),e._m(6),t("h2",[e._v("Sugerencias, donaciones, agradecimientos.")]),t("p",[e._v(" Si esta aplicación te ha resultado útil y deseas colaborar con su mantenimiento y desarrollo, puedes contribuir con una donación voluntaria. Usa los siguientes medios: ")]),e._m(7),e._m(8),t("p",[e._v("Copyright (C) 2021 David CM.")])])},te=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ul",[t("li",[e._v(" timestamp: es el momento justo en que esta marca debería ser reproducida al sincronizarla con el archivo de vídeo o audio con el que se trabaja actualmente. ")]),t("li",[e._v(" texto: el texto que debería ser verbalizado o mostrado, según el uso que le dé la aplicación final. ")])])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ol",[t("li",[e._v(" Donar al proyecto. Por si encuentras de utilidad este proyecto, y deseas colaborarme de alguna manera. ")]),t("li",[e._v(" Abrir archivo multimedia. Puede ser un archivo de audio o vídeo, una vez que sea correctamente cargado, se mostrarán los controles del reproductor y los controles para la gestión de marcas de tiempo. ")]),t("li",[e._v(" abrir archivo de descripciones. En formato srt, webVtt o pinpoint, por si tienes un trabajo previo o has usado algún reconocimiento de voz y ayudarte a adelantar camino con las descripciones. ")]),t("li",[e._v(" descargar descripciones actuales. Descarga un archivo vtt con todo el trabajo realizado hasta el momento. Para que lo compartas con alguien o lo utilices para después. ")]),t("li",[e._v(" guardar todo en localStorage: guarda el trabajo actual en el navegador, para continuarlo después. Se recomienda hacer esto con frecuencia, para evitar pérdidas de trabajo. ")]),t("li",[e._v(" borrar todo: limpia todas las descripciones realizadas. No pide confirmación ¡tener mucho cuidado con esta opción! ")]),t("li",[e._v(" offset: mueve todas las descripciones n segundos hacia la izquierda o derecha. Por ahora, solo es útil si queremos realizar pruebas y el archivo que hemos cargado tiene una duración distinta al original. No modifica de ninguna manera la marca de tiempo de las descripciones realizadas. ")])])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ol",[t("li",[e._v(" cues: una lista de todas las marcas de tiempo creadas hasta el momento. Se muestra únicamente el número consecutivo y el texto asociado. Aquí podemos seleccionar una marca y modificarla si lo deseamos. ")]),t("li",[e._v(" descripción: la descripción que deberá ser pronunciada en la marca de tiempo actual. ")]),t("li",[e._v(" timestamp: el tiempo en segundos en el que esta marca será reproducida. Podemos cambiarlo, pero recuerda que se aceptan únicamente números, con 3 decimales como máximo. ")]),t("li",[e._v(" reproducir marca anterior: nos lleva el cursor de marcas hacia la anterior, y la reproduce, tanto en audio como el texto con voz (si la voz está disponible) ")]),t("li",[e._v(" reproducir marca actual: reproduce la marca actual, tanto en audio como el texto con voz (si la voz está disponible) ")]),t("li",[e._v(" reproducir marca siguiente: nos lleva el cursor de marcas hacia la siguiente, y la reproduce, tanto en audio como el texto con voz (si la voz está disponible) ")]),t("li",[e._v(" borrar marca actual: elimina la marca actual, pero puede ser recuperada. ")]),t("li",[e._v("-0.5 segs: mueve la marca actual 0.5 segundos a la izquierda.")]),t("li",[e._v("-1 segs: mueve la marca actual 1 segundos a la izquierda.")]),t("li",[e._v("+1 segs: mueve la marca actual 1 segundos a la derecha.")]),t("li",[e._v("+0.5 segs: mueve la marca actual 0.5 segundos a la derecha.")]),t("li",[e._v(" Añadir nueva marca: inserta una nueva marca en el tiempo multimedia actual. Es decir, el tiempo actual del audio o vídeo cargado. ")]),t("li",[e._v(" reproducir con descripciones: reproduce el archivo multimedia y las descripciones, útil por si queremos probar si las descripciones están correctamente sincronizadas. ")]),t("li",[e._v(" Deshacer última marca borrada: reinserta la última marca borrada, con su respectiva descripción y marca de tiempo. Puedes recuperar tantas marcas como quieras. ")])])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ol",[t("li",[e._v(" Exportar trabajo actual al formato webVtt y descargarlo en su equipo: E. ")]),t("li",[e._v(" Buscar marca anterior más cercana al tiempo actual del vídeo: Y griega. ")]),t("li",[e._v("Reproducir vídeo en la descripción anterior: U.")]),t("li",[e._v("Reproducir vídeo en la descripción actual: I.")]),t("li",[e._v("reproducir vídeo en la descripción siguiente: O.")]),t("li",[e._v("Salvar trabajo actual en el local storage: s")]),t("li",[e._v("Eliminar marca / descripción actual: G.")]),t("li",[e._v("Recuperar descripción eliminada: H.")]),t("li",[e._v("Retroceder 5 segundos: j.")]),t("li",[e._v("pausa / reproducir: k.")]),t("li",[e._v("Adelantar 5 segundos: l")]),t("li",[e._v("Mover posición de marca actual un segundo hacia la izquierda: d.")]),t("li",[e._v("Mover posición de marca actual un segundo hacia la derecha: f.")]),t("li",[e._v(" Mover posición de marca actual medio segundo hacia la izquierda: c. ")]),t("li",[e._v("Mover posición de marca actual medio segundo hacia la derecha: v.")]),t("li",[e._v("Crear nueva marca / descripción en el tiempo actual: n.")]),t("li",[e._v('reducir velocidad de la reproducción: ","')]),t("li",[e._v('aumentar velocidad de la reproducción: "."')]),t("li",[e._v('Establecer velocidad de reproducción a la estándar (1x): "-".')])])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ul",[t("li",[e._v(" Leer descripciones con lector de pantallas. Permite que el lector de pantallas lea la descripción actual, si un lector de pantallas estuviese disponible. ")]),t("li",[e._v(" Usar síntesis de voz del sistema: permite que la aplicación lea las descripciones con alguna voz que se haya configurado, si el sistema cuenta con voces instaladas. ")])])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ul",[t("li",[e._v("idioma de la voz: el idioma usado para leer las descripciones.")]),t("li",[e._v(" voz para leer descripciones: la voz correspondiente al idioma seleccionado, para leer las descripciones. ")]),t("li",[e._v("velocidad: la velocidad de la voz.")]),t("li",[e._v("tono: el tono de la voz, más grave o más agudo.")]),t("li",[e._v(" Mensaje de prueba: puede escribir un texto en dicho campo o dejar el texto por defecto, para probar la voz seleccionada. ")]),t("li",[e._v(" probar voz: al activar este botón, se leerá el texto escrito en el campo anterior, con la voz y el idioma seleccionados. ")]),t("li",[e._v(" Guardar configuraciones de voz: guardará las configuraciones de voz, de manera que se utilizará el mismo idioma y la misma voz al iniciar la aplicación nuevamente. ")])])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ol",[t("li",[e._v(" Si se opta por usar voces en línea como las de Microsoft o Google, es posible que tenga desfases debido a la latencia que poseen estas voces. ")]),t("li",[e._v(" Las marcas borradas no se guardan en el local storage, por lo que si recargas tu proyecto, no podrás recuperar las marcas borradas en la sesión anterior. ")]),t("li",[e._v(" Acctualmente, el reproductor de descripciones no funciona a velocidades distintas de 1x, tenlo en cuenta al realizar pruebas. Se implementará esta compatibilidad a futuro. ")]),t("li",[e._v(" Actualmente no se puede regular el volumen de la voz, se espera implementar esta funcionalidad más adelante. ")])])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ul",[t("li",[t("a",{attrs:{href:"https://paypal.me/davicm"}},[e._v("PayPal.")])]),t("li",[t("a",{attrs:{href:"https://ko-fi.com/davidacm"}},[e._v("Ko-fi.")])]),t("li",[t("a",{attrs:{href:"https://davidacm.github.io/donations/"}},[e._v("Criptomonedas y otros métodos.")])])])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("p",[e._v(" Si deseas corregir errores, reportar problemas o nuevas características, puedes comunicarte conmigo al correo: "),t("a",{attrs:{href:"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#100;&#104;&#102;&#51;&#54;&#48;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;"}},[e._v("dhf360@gmail.com")]),e._v(". ")])}],ie={name:"Help",mounted:function(){this.$refs.sFocus.focus()},methods:{close:function(){this.$emit("onclose")}}},oe=ie,se=(i("792e"),Object(W["a"])(oe,ae,te,!1,null,"fb623762",null)),re=se.exports,ne={data:function(){return{tabIndex:0}},watch:{tabIndex:function(){this.cancelSpeak()}},components:{WorkView:J,Settings:ee,Help:re}},ce=ne,le=(i("034f"),Object(W["a"])(ce,r,n,!1,null,null,null)),ue=le.exports,de=i("1bbb"),pe=i("f902"),me=i("6190"),ve=i("a15b"),he=i("b28b"),fe=i("1947"),be=i("dd9a"),ge=i("5680"),ye=i("9eaa"),_e=i("6865"),Ce=i("c43f"),xe=i("4797"),ke=i("8361"),we=i("ea4c"),Pe=i("c3e6"),Te=i("9c7d"),Se=i("aa59");i("f9e3"),i("2dd8");o["a"].use(s["a"],{plyr:{}}),o["a"].use(C),o["a"].component("BContainer",de["a"]),o["a"].component("b-tabs",pe["a"]),o["a"].component("b-tab",me["a"]),o["a"].component("b-row",ve["a"]),o["a"].component("b-col",he["a"]),o["a"].component("b-button",fe["a"]),o["a"].component("b-dropdown",be["a"]),o["a"].component("b-dropdown-form",ge["a"]),o["a"].component("b-dropdown-item",ye["a"]),o["a"].component("b-dropdown-item-button",_e["a"]),o["a"].component("b-form-file",Ce["a"]),o["a"].component("b-form-input",xe["a"]),o["a"].component("b-form-select",ke["a"]),o["a"].component("b-form-select-option",we["a"]),o["a"].component("b-form-checkbox",Pe["a"]),o["a"].component("b-form-textarea",Te["a"]),o["a"].component("b-link",Se["a"]),new o["a"]({store:U,render:function(e){return e(ue)}}).$mount("#app")},"792e":function(e,a,t){"use strict";t("81c0")},"81c0":function(e,a,t){},"85ec":function(e,a,t){},a27f:function(e,a,t){},c8a0:function(e,a,t){},e98a:function(e,a,t){"use strict";t("c8a0")}});
//# sourceMappingURL=app.3762a2ab.js.map